"use strict";var u=Object.create;var n=Object.defineProperty;var h=Object.getOwnPropertyDescriptor;var f=Object.getOwnPropertyNames;var y=Object.getPrototypeOf,m=Object.prototype.hasOwnProperty;var x=(r,t)=>{for(var o in t)n(r,o,{get:t[o],enumerable:!0})},g=(r,t,o,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let e of f(t))!m.call(r,e)&&e!==o&&n(r,e,{get:()=>t[e],enumerable:!(s=h(t,e))||s.enumerable});return r};var S=(r,t,o)=>(o=r!=null?u(y(r)):{},g(t||!r||!r.__esModule?n(o,"default",{value:r,enumerable:!0}):o,r)),w=r=>g(n({},"__esModule",{value:!0}),r);var v={};x(v,{IndexStorage:()=>a});module.exports=w(v);var c=S(require("crypto")),l="aes-256-gcm",I=Buffer.from(process.env.SECRET_CRYPTO??"","hex"),E=c.default.randomBytes(16);var d=r=>{try{let t=c.default.createDecipheriv(l,I,Buffer.from(r.iv,"hex"));t.setAuthTag(Buffer.from(r.tag,"hex"));let o=Buffer.from(r.content,"hex");return Buffer.concat([t.update(o),t.final()]).toString("utf8")}catch{throw new Error("Erro ao descriptografar os dados.")}};var i=class{get storageId(){return this.props.storageId}get password(){return this.props.password}get account(){return this.props.account}get usageLocation(){return this.props.usageLocation}get link(){return this.props.link}get description(){return this.props.description}get userId(){return this.props.userId}constructor(t){this.props=t}showPassword(t){let[o,s,e]=t.split(":");return d({iv:o,content:s,tag:e})}};var a=class{constructor(t){this.indexStorageRepository=t}async execute(t){let o=await this.indexStorageRepository.index(t),s=[];return o.forEach(e=>{let p=new i({account:e.account,password:"",storageId:e.id,usageLocation:e.usageLocation,userId:e.userId,description:e.description||void 0,link:e.link||void 0});s.push(p)}),s}};0&&(module.exports={IndexStorage});
